{% load tz %}

<div class="race_details">
    <h1>
        {{ object.location }}  
    </h1>

    <p>
        {{ object.kind }}
        {% if object.points_multiplier > 1 %} {{ object.points_multiplier }}x {% endif %} 
        
        {% if object.cancelled %} 
            <span class="badge badge-danger">Cancelled</span> 
        {% elif object.in_progress %}
            <span class="badge badge-warning">In Progress</span> 
        {% elif object.finished %}
            <span class="badge badge-primary">Finished</span>
        {% else %}
            <span class="badge badge-success">Open</span>
        {% endif %}
    
    </p>
    <p>Race Date (CET): {{ object.race_date|timezone:"Europe/Zurich" }}</p>

    <p>FIS ID: {{ object.fis_id }}</p>
    <p>Race Page: <a href=https://www.fis-ski.com/DB/general/results.html?sectorcode=AL&raceid={{ object.fis_id }}>link to FIS</a></p>

    {% if user.is_staff %} 
        <div class="btn-group" role="group">
            <a href="{% url 'edit_race' object.pk %}" class="btn btn-secondary" role="button">Edit</a>
            <a href="{% url 'update_race' object.pk %}" class="btn btn-secondary">Update details from FIS</a>

            {% if not object.finished and not object.in_progress %}
                <a href="{% url 'publish_tipps' object.pk %}" class="btn btn-secondary">Publish Tipps</a>
            {% endif %}
            <a href="{% url 'finalize_race' object.pk %}" class="btn btn-secondary">Score Race</a> 
        </div>
    {% endif %}

</div>
